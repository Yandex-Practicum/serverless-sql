serverless-sql
===========================

В этом репозитории лежат исходники для сборки и запуска serverless-контейнера, 
в котором выполняется код для SQL тренажера.

Что запускается в контейнере
----------------------------

Есть два пути:
1) Если тест либа начинается с sql (`sql_testlib_stable`) - должно присылаться:
   1) `user_code.py` - SQL код пользователя.
   2) `author_code.py` - SQL код авторского решения.
   3) `test_code.py` - Питон код проверки ответа пользователя с помощью библиотеки. 
(Синтаксический анализ запроса пользователя - аналог AST дерева + поход в БД и анализ ответа БД)
 
**Зачем авторское решение не заныривал.**

2) Во всех остальных случаях (на проде встречается только `1.1.2`) передаётся:
   1) `runner.py` - Питон код, гарантирующий сначала запуск pre_code, а потом кода main.
   2) `main.py` - Python код, включающий в себя SQL пользователя и ответ базы 
на этот запрос (запрос происходит ещё на стороне aiopirce).
   3) `pre_code.py` - Код для запуска до кода пользователя
(не имеет особого смысла в реалиях данного контейнера)


Формат входных данных
---------------------

```json
{
    "command": "my command",
    "files": [
       {"name":  "blah", "content":  "balh"},
       {"name":  "blah2", "content":  "balh2"},
       ...
    ]
}
```

где:

`command` - команда для исполнения
`files` - файлы, мспользуемые кодом команды.
